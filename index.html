<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AdLer Icon Repository - SVG Icons zum Download</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header class="header">
        <div class="language-switcher">
            <button onclick="switchLanguage('de')" class="lang-btn active" id="lang-de">DE</button>
            <button onclick="switchLanguage('en')" class="lang-btn" id="lang-en">EN</button>
        </div>
        <h1 data-translate="title">AdLer Icon Repository</h1>
        <p data-translate="subtitle">Hochwertige SVG-Icons für deine Projekte. Kostenlos zum Download und sofort einsatzbereit für Web, Mobile und Print.</p>
    </header>

        <div class="container">
        <div class="icon-grid">
            <!-- Icons werden dynamisch generiert -->
        </div>
    
    </div>

        <script>
        // Icon-Datenbank - nur Metadaten, SVG wird aus Datei geladen
        const iconDatabase = [
            {
                id: 'star',
                filename: 'star.svg',
                translations: {
                    de: { title: 'Stern Icon', desc: 'Perfekt für Bewertungen und Favoriten' },
                    en: { title: 'Star Icon', desc: 'Perfect for ratings and favorites' }
                }
            },
            {
                id: 'check',
                filename: 'check.svg',
                translations: {
                    de: { title: 'Häkchen Icon', desc: 'Für Erfolg und Bestätigung' },
                    en: { title: 'Check Icon', desc: 'For success and confirmation' }
                }
            },
            {
                id: 'search',
                filename: 'search.svg',
                translations: {
                    de: { title: 'Suche Icon', desc: 'Für Suchfunktionen und Filter' },
                    en: { title: 'Search Icon', desc: 'For search functions and filters' }
                }
            },
            {
                id: 'message',
                filename: 'message.svg',
                translations: {
                    de: { title: 'Nachricht Icon', desc: 'Für Chat und Kommunikation' },
                    en: { title: 'Message Icon', desc: 'For chat and communication' }
                }
            },
            {
                id: 'bookmark',
                filename: 'bookmark.svg',
                translations: {
                    de: { title: 'Lesezeichen Icon', desc: 'Für Lesezeichen und Sammlungen' },
                    en: { title: 'Bookmark Icon', desc: 'For bookmarks and collections' }
                }
            },
            {
                id: 'heart',
                filename: 'heart.svg',
                translations: {
                    de: { title: 'Herz Icon', desc: 'Für Likes und Favoriten' },
                    en: { title: 'Heart Icon', desc: 'For likes and favorites' }
                }
            }
        ];

        let currentLanguage = 'de';

        // SVG aus Datei laden
        async function loadSVG(filename) {
            try {
                const response = await fetch(`assets/${filename}`);
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                const svgText = await response.text();
                return svgText;
            } catch (error) {
                console.warn(`Fehler beim Laden von ${filename}:`, error);
                return `<circle cx="12" cy="12" r="10"/><text x="12" y="16" text-anchor="middle" font-size="8">?</text>`;
            }
        }

        // Icons dynamisch generieren (async)
        async function generateIconGrid() {
            const iconGrid = document.querySelector('.icon-grid');
            iconGrid.innerHTML = '<div style="grid-column: 1/-1; text-align: center; padding: 2rem;">Lade Icons...</div>';

            const iconCards = await Promise.all(iconDatabase.map(async (icon) => {
                const iconCard = document.createElement('div');
                iconCard.className = 'icon-card';
                
                // SVG aus Datei laden
                const svgContent = await loadSVG(icon.filename);
                
                iconCard.innerHTML = `
                    <div class="icon-preview">
                        ${svgContent}
                    </div>
                    <h3 class="icon-name">${icon.translations[currentLanguage].title}</h3>
                    <p class="icon-description">${icon.translations[currentLanguage].desc}</p>
                    <a href="#" class="download-btn" onclick="downloadIcon('${icon.filename}')">${currentLanguage === 'de' ? 'Download SVG' : 'Download SVG'}</a>
                `;
                
                return iconCard;
            }));

            // Grid leeren und Icons hinzufügen
            iconGrid.innerHTML = '';
            iconCards.forEach(card => iconGrid.appendChild(card));
        }

        // Neues Icon zur Datenbank hinzufügen
        function addNewIcon(iconData) {
            iconDatabase.push(iconData);
            generateIconGrid();
        }

        // Icons automatisch aus assets Ordner scannen (optional)
        async function scanAssetsFolder() {
            try {
                // Diese Funktion würde alle SVG-Dateien im assets Ordner finden
                // Für eine echte Implementierung bräuchtest du einen Server-Endpoint
                console.log('Asset-Scan würde hier implementiert werden');
            } catch (error) {
                console.warn('Asset-Scan nicht verfügbar:', error);
            }
        }

        function switchLanguage(lang) {
            currentLanguage = lang;
            document.documentElement.lang = lang;
            
            // Buttons aktualisieren
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.getElementById(`lang-${lang}`).classList.add('active');
            
            // Titel und Untertitel aktualisieren
            const titleTexts = {
                de: {
                    title: "AdLer Icon Repository",
                    subtitle: "Hochwertige SVG-Icons für deine Projekte. Kostenlos zum Download und sofort einsatzbereit für Web, Mobile und Print."
                },
                en: {
                    title: "AdLer Icon Repository",
                    subtitle: "High-quality SVG icons for your projects. Free to download and ready to use for web, mobile and print."
                }
            };
            
            document.querySelector('[data-translate="title"]').textContent = titleTexts[lang].title;
            document.querySelector('[data-translate="subtitle"]').textContent = titleTexts[lang].subtitle;
            
            // Icons neu generieren mit neuer Sprache
            generateIconGrid();
            
            // Sprache in localStorage speichern
            localStorage.setItem('language', lang);
        }

        async function downloadIcon(filename) {
            try {
                const response = await fetch(`assets/${filename}`);
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const blob = await response.blob();
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = filename;
                a.click();
                URL.revokeObjectURL(url);
            } catch (error) {
                console.error('Download-Fehler:', error);
                alert('Fehler beim Download der Datei');
            }
        }

        // Gespeicherte Sprache laden und Icons generieren
        document.addEventListener('DOMContentLoaded', async function() {
            const savedLanguage = localStorage.getItem('language') || 'de';
            currentLanguage = savedLanguage;
            
            if (savedLanguage !== 'de') {
                document.querySelectorAll('.lang-btn').forEach(btn => {
                    btn.classList.remove('active');
                });
                document.getElementById(`lang-${savedLanguage}`).classList.add('active');
                
                // Titel sofort aktualisieren
                const titleTexts = {
                    en: {
                        title: "AdLer Icon Repository",
                        subtitle: "High-quality SVG icons for your projects. Free to download and ready to use for web, mobile and print."
                    }
                };
                
                if (titleTexts[savedLanguage]) {
                    document.querySelector('[data-translate="title"]').textContent = titleTexts[savedLanguage].title;
                    document.querySelector('[data-translate="subtitle"]').textContent = titleTexts[savedLanguage].subtitle;
                }
            }
            
            await generateIconGrid();
        });

        // Admin-Funktion zum einfachen Hinzufügen neuer Icons
        window.addIcon = function(id, filename, deTitle, deDesc, enTitle, enDesc) {
            const newIcon = {
                id: id,
                filename: filename,
                translations: {
                    de: { title: deTitle, desc: deDesc },
                    en: { title: enTitle, desc: enDesc }
                }
            };
            addNewIcon(newIcon);
            console.log(`Icon "${id}" wurde hinzugefügt!`);
        };
        </script>
</body>
</html>