<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AdLer Icon Repository - SVG Icons zum Download</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header class="header">
        <div class="language-switcher">
            <button onclick="switchLanguage('de')" class="lang-btn active" id="lang-de">DE</button>
            <button onclick="switchLanguage('en')" class="lang-btn" id="lang-en">EN</button>
        </div>
        <h1 data-translate="title">AdLer Icon Repository</h1>
        <p data-translate="subtitle" class="subtitle">Hochwertige SVG-Icons für deine Projekte. Kostenlos zum Download und sofort einsatzbereit für Web, Mobile und Print.</p>
        <p data-translate="subtitletext" class="subtitletext">Alle im Projekt entstandenen Icons werden hier zum kostenfreien Download angeboten. Alle Icons stehen unter der MIT-License und sind frei verfügbar und nutzbar.</p>
    </header>

        <div class="container">
        <div class="icon-grid">
            <!-- Icons werden dynamisch generiert -->
        </div>
    
    </div>

        <script>
        // Icon-Datenbank - nur Metadaten, SVG wird aus Datei geladen

        const iconDatabase = [
            {
                id: 'accessoires',
                filename: 'accessoires.svg',
                translations: {
                    de: { title: 'Accessoires', desc: 'Genutzt im Avatar Editor für Accessoires' },
                    en: { title: 'Accessoires', desc: 'Used in AdLer Avatar Editor for Accessoires' }
                }
            },
            {
                id: 'adaptivity-quiz',
                filename: 'adaptivity-quiz.svg',
                translations: {
                    de: { title: 'Adaptivitätselement', desc: 'Das AdLer Adaptivitätselement' },
                    en: { title: 'Adaptivity Quiz', desc: 'AdLer Adaptivity Element' }
                }
            },
            {
                id: 'adler-engine',
                filename: 'adler-engine.svg',
                translations: {
                    de: { title: 'AdLer 3D-Lernumgebung', desc: 'Logo der AdLer 3D-Lernumgebung, intern auch "AdLerEngine" genannt.' },
                    en: { title: 'AdLer Engine', desc: 'Logo of the 3d-learning environment, also known as "AdLerEngine" internally' }
                }
            },
            {
                id: 'body-big',
                filename: 'body-big.svg',
                translations: {
                    de: { title: 'Körper groß', desc: 'Im AdLer Avatar Editor für große Körper' },
                    en: { title: 'Body big', desc: 'In the AdLer Avatar Editor for big bodies' }
                }
            },
            {
                id: 'body-small',
                filename: 'body-small.svg',
                translations: {
                    de: { title: 'Körper klein', desc: 'Im AdLer Avatar Editor für kleine Körper' },
                    en: { title: 'Body small', desc: 'In the AdLer Avatar Editor for small bodies' }
                }
            },
            {
                id: 'body',
                filename: 'body.svg',
                translations: {
                    de: { title: 'Körper Icon', desc: 'Generisches Körper Icon im Avatar Editor' },
                    en: { title: 'Body Icon', desc: 'Generic body icon in the avatar editor' }
                }
            },
            {
                id: 'bug-report',
                filename: 'bug-report.svg',
                translations: {
                    de: { title: 'Bug Report', desc: 'Icon für einen Button, der zu einem Fehlerreportformular führt' },
                    en: { title: 'Bug Report', desc: 'Icon for a button, which leads to a bugreport form' }
                }
            },
            {
                id: 'check-solution',
                filename: 'check-solution.svg',
                translations: {
                    de: { title: 'Lösung prüfen', desc: 'Icon für das Überprüfen von Lösungen und Antworten' },
                    en: { title: 'Check Solution', desc: 'Icon for checking solutions and answers' }
                }
            },
            {
                id: 'close',
                filename: 'close.svg',
                translations: {
                    de: { title: 'Schließen', desc: 'Icon zum Schließen von Dialogen, Fenstern oder Bereichen' },
                    en: { title: 'Close', desc: 'Icon for closing dialogs, windows or areas' }
                }
            },
            {
                id: 'clothing',
                filename: 'clothing.svg',
                translations: {
                    de: { title: 'Kleidung', desc: 'Icon für Kleidung und Outfits im Avatar Editor' },
                    en: { title: 'Clothing', desc: 'Icon for clothing and outfits in the Avatar Editor' }
                }
            },
            {
                id: 'coin',
                filename: 'coin.svg',
                translations: {
                    de: { title: 'Münze', desc: 'Icon für Währung, Punkte oder Belohnungen' },
                    en: { title: 'Coin', desc: 'Icon for currency, points or rewards' }
                }
            },
            {
                id: 'controls',
                filename: 'controls.svg',
                translations: {
                    de: { title: 'Steuerung', desc: 'Icon für Steuerungselemente und Bedienelemente' },
                    en: { title: 'Controls', desc: 'Icon for control elements and user interface controls' }
                }
            }
        ];

        let currentLanguage = 'de';

        // SVG als Data URL laden (komplett isoliert)
        async function loadSVGAsDataURL(filename) {
            try {
                const response = await fetch(`assets/${filename}`);
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                const svgText = await response.text();
                
                // SVG als Data URL encodieren
                const encoded = btoa(unescape(encodeURIComponent(svgText)));
                return `data:image/svg+xml;base64,${encoded}`;
            } catch (error) {
                console.warn(`Fehler beim Laden von ${filename}:`, error);
                return 'data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjQgMjQiPjxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjEwIi8+PC9zdmc+';
            }
        }

        // Icons als IMG-Tags generieren
        async function generateIconGrid() {
            const iconGrid = document.querySelector('.icon-grid');
            iconGrid.innerHTML = '<div style="grid-column: 1/-1; text-align: center; padding: 2rem;">Lade Icons...</div>';

            const iconCards = await Promise.all(iconDatabase.map(async (icon) => {
                const iconCard = document.createElement('div');
                iconCard.className = 'icon-card';
                
                // SVG als Data URL laden
                const svgDataURL = await loadSVGAsDataURL(icon.filename);
                
                iconCard.innerHTML = `
                    <div class="icon-preview">
                        <img src="${svgDataURL}" alt="${icon.translations[currentLanguage].title}" />
                    </div>
                    <h3 class="icon-name">${icon.translations[currentLanguage].title}</h3>
                    <p class="icon-description">${icon.translations[currentLanguage].desc}</p>
                    <a href="#" class="download-btn" onclick="downloadIcon('${icon.filename}')">${currentLanguage === 'de' ? 'SVG herunterladen' : 'Download SVG'}</a>
                `;
                
                return iconCard;
            }));

            // Grid leeren und Icons hinzufügen
            iconGrid.innerHTML = '';
            iconCards.forEach(card => iconGrid.appendChild(card));
        }

        // Neues Icon zur Datenbank hinzufügen
        function addNewIcon(iconData) {
            iconDatabase.push(iconData);
            generateIconGrid();
        }

        // Icons automatisch aus assets Ordner scannen (optional)
        async function scanAssetsFolder() {
            try {
                // Diese Funktion würde alle SVG-Dateien im assets Ordner finden
                // Für eine echte Implementierung bräuchtest du einen Server-Endpoint
                console.log('Asset-Scan würde hier implementiert werden');
            } catch (error) {
                console.warn('Asset-Scan nicht verfügbar:', error);
            }
        }

        function switchLanguage(lang) {
            currentLanguage = lang;
            document.documentElement.lang = lang;
            
            // Buttons aktualisieren
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.getElementById(`lang-${lang}`).classList.add('active');
            
            // Titel und Untertitel aktualisieren
            const titleTexts = {
                de: {
                    title: "AdLer Icon Repository",
                    subtitle: "Hochwertige SVG-Icons für deine Projekte. Kostenlos zum Download und sofort einsatzbereit für Web, Mobile und Print."
                },
                en: {
                    title: "AdLer Icon Repository",
                    subtitle: "High-quality SVG icons for your projects. Free to download and ready to use for web, mobile and print."
                }
            };
            
            document.querySelector('[data-translate="title"]').textContent = titleTexts[lang].title;
            document.querySelector('[data-translate="subtitle"]').textContent = titleTexts[lang].subtitle;
            
            // Icons neu generieren mit neuer Sprache
            generateIconGrid();
            
            // Sprache in localStorage speichern
            localStorage.setItem('language', lang);
        }

        async function downloadIcon(filename) {
            try {
                const response = await fetch(`assets/${filename}`);
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const blob = await response.blob();
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = filename;
                a.click();
                URL.revokeObjectURL(url);
            } catch (error) {
                console.error('Download-Fehler:', error);
                alert('Fehler beim Download der Datei');
            }
        }

        // Gespeicherte Sprache laden und Icons generieren
        document.addEventListener('DOMContentLoaded', async function() {
            const savedLanguage = localStorage.getItem('language') || 'de';
            currentLanguage = savedLanguage;
            
            if (savedLanguage !== 'de') {
                document.querySelectorAll('.lang-btn').forEach(btn => {
                    btn.classList.remove('active');
                });
                document.getElementById(`lang-${savedLanguage}`).classList.add('active');
                
                // Titel sofort aktualisieren
                const titleTexts = {
                    en: {
                        title: "AdLer Icon Repository",
                        subtitle: "High-quality SVG icons for your projects. Free to download and ready to use for web, mobile and print."
                    }
                };
                
                if (titleTexts[savedLanguage]) {
                    document.querySelector('[data-translate="title"]').textContent = titleTexts[savedLanguage].title;
                    document.querySelector('[data-translate="subtitle"]').textContent = titleTexts[savedLanguage].subtitle;
                }
            }
            
            await generateIconGrid();
        });

        // Admin-Funktion zum einfachen Hinzufügen neuer Icons
        window.addIcon = function(id, filename, deTitle, deDesc, enTitle, enDesc) {
            const newIcon = {
                id: id,
                filename: filename,
                translations: {
                    de: { title: deTitle, desc: deDesc },
                    en: { title: enTitle, desc: enDesc }
                }
            };
            addNewIcon(newIcon);
            console.log(`Icon "${id}" wurde hinzugefügt!`);
        };
        </script>
</body>
</html>